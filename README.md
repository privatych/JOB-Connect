# Job_ConnectBot ‚Äî Telegram –±–æ—Ç –Ω–∞ aiogram v3

–≠—Ç–æ—Ç –±–æ—Ç –Ω–∞ aiogram v3 —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –≤ –ª–æ–∫–∞–ª—å–Ω—É—é SQLite-–±–∞–∑—É, –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å—Ç–∞—Ä—Ç–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ —Å –∫–Ω–æ–ø–∫–æ–π –Ω–∞ –º–∏–Ω–∏‚Äë–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ, –∞ –¥–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –ø–∞–Ω–µ–ª—å —Å:
- –æ—Ç–ø—Ä–∞–≤–∫–æ–π —Ä–∞—Å—Å—ã–ª–∫–∏ –ø–æ –≤—Å–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º (—Ç–µ–∫—Å—Ç/—Ñ–æ—Ç–æ/–≤–∏–¥–µ–æ);
- –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–º —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ —Å –≥—Ä–∞—Ñ–∏–∫–æ–º —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–π –∑–∞ –Ω–µ–¥–µ–ª—é.

## –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è
- Python 3.12+
- Telegram Bot Token
- –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ: Docker + Docker Compose

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞ (–æ—Å–Ω–æ–≤–Ω–æ–µ)
- `run.py` ‚Äî —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞, —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —Ä–æ—É—Ç–µ—Ä–æ–≤, –∑–∞–ø—É—Å–∫ polling.
- `handlers/command.py` ‚Äî –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ `/start`.
- `handlers/admin.py` ‚Äî –∞–¥–º–∏–Ω‚Äë–ø–∞–Ω–µ–ª—å: —Ä–∞—Å—Å—ã–ª–∫–∞ –∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞.
- `services/services.py` ‚Äî —Ä–∞–±–æ—Ç–∞ —Å –ë–î –∏ –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ –≥—Ä–∞—Ñ–∏–∫–∞ (seaborn/matplotlib).
- `utilities/database.py` ‚Äî SQLite‚Äë–æ–±—ë—Ä—Ç–∫–∞ (`data/bot.db`).
- `utilities/text_utilities.py` ‚Äî –∑–∞–≥—Ä—É–∑–∫–∞ —Ç–µ–∫—Å—Ç–æ–≤ –∏–∑ `data/<locale>/*.json`.
- `keyboards/keyboard.py` ‚Äî –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä inline‚Äë–∫–ª–∞–≤–∏–∞—Ç—É—Ä.
- `states/admin_states.py` ‚Äî FSM —Å–æ—Å—Ç–æ—è–Ω–∏—è —Ä–∞—Å—Å—ã–ª–∫–∏.
- `config.py` ‚Äî –∑–∞–≥—Ä—É–∑–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è (`BOT_TOKEN`, `ADMIN`).

## –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `.env` –≤ –∫–æ—Ä–Ω–µ:
```
BOT_TOKEN=your-telegram-bot-token
ADMIN=123456789
```
–°–º. —à–∞–±–ª–æ–Ω `.env.example`.

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫ (–ª–æ–∫–∞–ª—å–Ω–æ)
1. –°–æ–∑–¥–∞–π—Ç–µ –∏ –∞–∫—Ç–∏–≤–∏—Ä—É–π—Ç–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è):
```
python3 -m venv .venv
source .venv/bin/activate
```
2. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:
```
pip install --upgrade pip
pip install -r requirements.txt
```
3. –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env` –ø–æ –æ–±—Ä–∞–∑—Ü—É `.env.example` –∏ –∑–∞–ø–æ–ª–Ω–∏—Ç–µ `BOT_TOKEN`, `ADMIN`.
4. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Ñ–∞–π–ª –ë–î —Å—É—â–µ—Å—Ç–≤—É–µ—Ç: `data/bot.db`. –ï—Å–ª–∏ –µ–≥–æ –Ω–µ—Ç, —Å–æ–∑–¥–∞–π—Ç–µ –ø—É—Å—Ç—É—é –ë–î c —Ç–∞–±–ª–∏—Ü–µ–π:
```
sqlite3 data/bot.db "CREATE TABLE IF NOT EXISTS users (id INTEGER PRIMARY KEY AUTOINCREMENT, telegram_id INTEGER UNIQUE, telegram_username TEXT, registration_date TEXT, is_active INTEGER DEFAULT 1);"
```
5. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –±–æ—Ç–∞:
```
python run.py
```

## –ó–∞–ø—É—Å–∫ –≤ Docker
1. –°–æ–∑–¥–∞–π—Ç–µ `.env` (—Å–º. –≤—ã—à–µ).
2. –°–æ–±–µ—Ä–∏—Ç–µ –∏ –∑–∞–ø—É—Å—Ç–∏—Ç–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä:
```
docker compose up -d --build
```
–õ–æ–≥–∏:
```
docker compose logs -f
```

## –û–ø–∏—Å–∞–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞
- `/start` ‚Äî —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–µ—Å–ª–∏ –µ—â—ë –Ω–µ –±—ã–ª –≤ –ë–î), –≤—ã–≤–æ–¥ –ª–æ–∫–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è `data/ru/start_message.json` —Å –∫–Ω–æ–ø–∫–æ–π (–ø–æ–¥–¥–µ—Ä–∂–∫–∞ `url:` –∏ `app:` —Å—Å—ã–ª–æ–∫).
- `/admin` ‚Äî –¥–æ—Å—Ç—É–ø —Ç–æ–ª—å–∫–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é —Å `ADMIN` (–∏–∑ `.env`):
  - "üöÄ–û—Ç–ø—Ä–∞–≤–∏—Ç—å —Ä–∞—Å—Å—ã–ª–∫—É" ‚Äî –∑–∞–≥—Ä—É–∑–∫–∞ —Ç–µ–∫—Å—Ç–∞/—Ñ–æ—Ç–æ/–≤–∏–¥–µ–æ, –ø—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä, –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –∏ —Ä–∞—Å—Å—ã–ª–∫–∞ –≤—Å–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º; –ø—Ä–∏ –æ—à–∏–±–∫–µ –¥–æ—Å—Ç–∞–≤–∫–∏ –ø–æ–º–µ—á–∞–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∫–∞–∫ –Ω–µ–∞–∫—Ç–∏–≤–Ω–æ–≥–æ.
  - "üìä–ü–æ–ª—É—á–∏—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É" ‚Äî –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –≥—Ä–∞—Ñ–∏–∫ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–π –∑–∞ –ø–æ—Å–ª–µ–¥–Ω—é—é –Ω–µ–¥–µ–ª—é (PNG –≤ `cache/registrations_bar_chart.png`).

## –ü—Ä–∏–º–µ—á–∞–Ω–∏—è –ø–æ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ
- –õ–æ–≥–∏ –æ—à–∏–±–æ–∫ ‚Äî –≤ `logs/error.log` (–∫–∞—Ç–∞–ª–æ–≥–∏ `logs` –∏ `cache` —Å–æ–∑–¥–∞—é—Ç—Å—è –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ).
- –ì—Ä–∞—Ñ–∏–∫–∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ `cache/` –∏ –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –∫–∞–∫ `FSInputFile`.
- –õ–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è —Ç–µ–∫—Å—Ç–æ–≤ ‚Äî —á–µ—Ä–µ–∑ JSON –≤ `data/<locale>/`.

## –¢–∏–ø–∏—á–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã
- –ù–µ–≤–µ—Ä–Ω—ã–π —Ç–æ–∫–µ–Ω –∏–ª–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –∏–Ω—Ç–µ—Ä–Ω–µ—Ç ‚Äî –±–æ—Ç –Ω–µ —Å—Ç–∞—Ä—Ç—É–µ—Ç (`TelegramBadRequest`).
- –í –ë–î –Ω–µ—Ç —Ç–∞–±–ª–∏—Ü—ã `users` ‚Äî —Å–æ–∑–¥–∞–π—Ç–µ —Å—Ö–µ–º—É, –∫–∞–∫ –ø–æ–∫–∞–∑–∞–Ω–æ –≤—ã—à–µ.
- –ù–µ—Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ –ø—É—Ç–µ–π –ø—Ä–∏ Docker‚Äë–∑–∞–ø—É—Å–∫–µ ‚Äî –≤ `Dockerfile` –∏ `docker-compose.yml` —Ä–∞–±–æ—á–∞—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∞: `/opt/Job_ConnectBot`.

## –õ–∏—Ü–µ–Ω–∑–∏—è
MIT (–ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –∑–∞–º–µ–Ω–∏—Ç–µ).
